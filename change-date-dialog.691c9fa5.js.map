{"mappings":"AAAA,MAAM,0BAAI,cAAc,MAAM;AAE9B,MAAM,+BAAS,IAAM;IACnB,wBAAE,UAAU;AACd;AAEA,MAAM,mCAAa,IAAM;IACvB;QAAC;QAAa;KAAU,CAAC,OAAO,CAAC,CAAC,KAAO;QACvC,MAAM,KAAK,SAAS,cAAc,CAAC;QAEnC,GAAG,SAAS,GAAG,GAAG,SAAS,KAAK,WAAW,KAAK,QAAQ;IAC1D;AACF;AAEA,MAAM,kCAAY;AAElB,MAAM,iCAAW,CAAC,SAAW;IAC3B,QAAQ,GAAG,CAAC;IAEZ;IAEA,wBAAE,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,QAAU,QAAQ,GAAG,CAAC,MAAM,GAAG,CAClD,CAAC,OAAS;YAER,MAAM,eAAe,KAAK,KAAK,CAAC,KAAK,GAAG,IAAK,SAAS;YACtD,MAAM,aAAa,IAAI,KAAK,cAAc,WAAW;YAErD,OAAO,wBAAE,GAAG,CAAC,KAAK,EAAE,EAAE,UAAU,OAAO;QACzC,KACE,OAAO,CAAC;AACd;AAEA,OAAO,OAAO,GAAG,IAAM,+BAAS;AAChC,OAAO,UAAU,GAAG,IAAM,+BAAS;AAEnC,OAAO,cAAc,GAAG,IAAM;IAC5B,MAAM;IACN;AACF;AAEA,OAAO,UAAU,GAAG,IAAM;IACxB;AACF;AAEA,wBAAE,MAAM,CAAC,IAAM;IACb,wBAAE,MAAM,CAAC,cAAc,IAAI;AAC7B","sources":["src/js/change-date-dialog.js"],"sourcesContent":["const t = TrelloPowerUp.iframe();\n\nconst finish = () => {\n  t.closePopup();\n};\n\nconst toggleLoad = () => {\n  ['edit-date', 'loading'].forEach((id) => {\n    const el = document.getElementById(id);\n\n    el.className = el.className === 'hidden' ? '' : 'hidden';\n  });\n};\n\nconst msPerYear = 31536000000;\n\nconst editYear = (amount) => {\n  console.log('editing years...');\n\n  toggleLoad();\n\n  t.cards('all').then((cards) => Promise.all(cards.map(\n    (card) => {\n\n      const newDueDateMs = Date.parse(card.due) + (amount * msPerYear);\n      const newDueDate = new Date(newDueDateMs).toISOString();\n\n      return t.set(card.id, 'shared', 'due', newDueDate);\n    },\n  ))).finally(toggleLoad);\n};\n\nwindow.addYear = () => editYear(1);\nwindow.removeYear = () => editYear(-1);\n\nwindow.unsetCompleted = () => {\n  alert('unset completed');\n  finish();\n};\n\nwindow.closePopup = () => {\n  finish();\n};\n\nt.render(() => {\n  t.sizeTo('#edit-date').done();\n});\n"],"names":[],"version":3,"file":"change-date-dialog.691c9fa5.js.map"}